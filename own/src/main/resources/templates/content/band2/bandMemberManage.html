<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" lang="ko">

<head>
<!-- 나이스 셀렉트/스크롤 -->
<script src="/css/band/vendors/nice-select/js/jquery.nice-select.js"></script>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Royal Hotel</title>
</head>
<style>
/* 모달css */
.modal_bandMemberInfo {
	display: none;
	position: fixed;
	z-index: 80;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	overflow: auto;
	background-color: rgb(0, 0, 0);
	background-color: rgba(0, 0, 0, 0.4);
}

.modal_bandMemberInfo img {
	width: 250px;
	height: 250px;
	border-radius: 10%;
}

#modal_profileText {
	margin-left: 10px;
	display: flex;
	flex-wrap: wrap;
	flex-direction: column;
	align-content: flex-start;
}

#modal_profileText i {
	margin-right: 15px;
}

.modal_btn {
	padding: 10px;
	display: flex;
	flex-direction: row;
	align-items: center;
	justify-content: center;
}

.modal_btn i {
	margin-right: 40px;
}

.item {
	margin-top: 10px;
	margin-bottom: 10px;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
}

.item-row {
	margin-bottom: 5px;
	display: flex;
	flex-direction: row;
	align-items: center;
}

.modal-content {
	display: flex;
	width: 500px;
	height: 500px;
	flex-direction: column;
	background-color: #fefefe;
	margin: 15% auto;
	padding: 20px;
	border: 1px solid #888;
}

.form-control {
	display: block;
	width: 100%;
	height: calc(1.5em + 0.75rem + 2px);
	padding: 0.375rem 0.75rem;
	font-size: 1rem;
	font-weight: 400;
	line-height: 1.5;
	color: #495057;
	background-color: #fff;
	background-clip: padding-box;
	border: 1px solid #ced4da;
	border-radius: 5px;
	transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.form-control:disabled, .form-control[readonly] {
	background-color: #e9ecef;
	opacity: 1;
}

/* 옵션 */
.searchInput {
	width: 250px;
}

.selectDiv {
	display: flex;
	align-items: center;
	justify-content: flex-end;
	margin-bottom: 5px;
}

.nice-select {
	width: 137px;
}

/* 버튼 */
.formbold-btn {
	display: inline-block;
	font-weight: 400;
	color: #666666;
	text-align: center;
	vertical-align: middle;
	user-select: none;
	background-color: transparent;
	border: 1px solid transparent;
	padding: 0.375rem 0.75rem;
	font-size: 1rem;
	line-height: 1.5;
	border-radius: 30px;
	transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,
		border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.formbold-btn:hover {
	color: #666666;
	text-decoration: none;
}

.formbold-btn-primary {
	color: #fff;
	background-color: #17a2b8;
	border-color: #17a2b8;
}

.formbold-btn-primary:hover {
	color: #fff;
	background-color: #138496;
	border-color: #117a8b;
}

/* 테이블 */
.responsive-table {
	background-color: #fefefe;
	border-collapse: collapse;
	border-radius: 10px;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.02);
	width: 100%;
	overflow: hidden;
}

.responsive-table__row {
	border-bottom: 1px solid #edeef2;
	padding: 0 1.5rem;
}

@media ( min-width : 768px) {
	.responsive-table__row {
		grid-template-columns: 2fr 1fr 2fr 2fr 1fr;
	}
}

@media ( min-width : 768px) and (max-width: 991px) {
	.responsive-table__row {
		grid-template-columns: 1fr 2fr 1fr;
	}
}

.responsive-table__row th, .responsive-table__row td {
	padding: 0.3rem;
	text-align: center;
}

.responsive-table__head {
	background-color: #e1e8f2;
}

@media ( max-width : 991px) {
	.responsive-table__head {
		display: none;
	}
}

.responsive-table__head__title {
	align-items: center;
	justify-content: center;
	font-weight: 500;
	text-transform: capitalize;
}

.responsive-table__body .responsive-table__row {
	transition: 0.1s linear;
	transition-property: color, background;
}

.responsive-table__body .responsive-table__row:last-child {
	border-bottom: none;
}

.responsive-table__body .responsive-table__row:hover {
	color: #fff;
	background-color: #17a2b8;
}

.responsive-table__body__text {
	flex-wrap: wrap;
	align-items: center;
	justify-content: center;
}

.responsive-table__body__text::before {
	margin-right: 1rem;
	font-weight: 600;
	text-transform: capitalize;
}

@media ( max-width : 991px) {
	.responsive-table__body__text::before {
		content: attr(data-title) " :";
	}
}

@media ( max-width : 400px) {
	.responsive-table__body__text::before {
		width: 100%;
		margin-bottom: 1rem;
	}
}

.responsive-table__body__text--name {
	font-weight: 600;
}

@media ( min-width : 768px) {
	.responsive-table__body__text--name::before {
		display: none;
	}
}

@media ( min-width : 768px) and (max-width: 991px) {
	.responsive-table__body__text--name {
		grid-column: 0.5;
		flex-direction: column;
	}
}

@media ( min-width : 768px) and (max-width: 991px) {
	.responsive-table__body__text--status,
		.responsive-table__body__text--types,
		.responsive-table__body__text--update {
		grid-column: 0.6666666667;
	}
}

@media ( min-width : 768px) and (max-width: 991px) {
	.responsive-table__body__text--country {
		grid-column: -3;
	}
}

@media ( min-width : 768px) and (max-width: 991px) {
	.responsive-table__body__text--name,
		.responsive-table__body__text--country {
		grid-row: 2;
	}
}

/* The Close Button */
.closeBtn {
	color: #aaa;
	float: right;
	font-size: 28px;
	font-weight: bold;
	cursor: pointer;
}

.close:hover, .close:focus {
	color: black;
	text-decoration: none;
	cursor: pointer;
}
</style>

<body>
	<div class="col-12 text-left mb-2">
		<ul class="list-inline mb-4" id="menu-filters"
			style="text-align: center;">
			<li class="btn btn-outline-primary m-1 active" id="allBandMemberLi"
				val="1">전체 멤버</li>
			<li class="btn btn-outline-primary m-1" id="waitingBandMemberLi"
				val="1">승인 대기 멤버</li>
			<li class="btn btn-outline-primary m-1" id="kickedBandMemberLi"
				val="1">강제 탈퇴 멤버</li>
		</ul>
	</div>

	<div id="aBandMemberList" style="display: block">
		<div class="item-row optionDiv">
			<div class="item-row">
				<input type="text" class="form-control searchInput"
					placeholder="아이디 또는 별명 검색" id="aSearchVal" name="aSearchVal">
				<span class="input-group-btn">
					<button class="btn btn-default searchBtn" type="button"
						id="aSearchBtn">
						<i class="lnr lnr-magnifier"></i>
					</button>
			</div>
			<div class="item-row" style="width: 173px;">
				<span class="hoverCursor" style="margin-right: 5px;"> 전체 멤버 수
				</span><span id="aMemberCnt"></span>
			</div>
			<input type="hidden" name="aPageNum" value="1"> </span>
			<div class="selectDiv">
				<select id="aSelectOption" name="aSelectOption">
					<option value="signupDate" selected="selected">가입일자 순</option>
					<option value="name">별명 순</option>
					<option value="accessDate">최종접속일 순</option>
					<option value="boradCnt">게시글 순</option>
					<option value="replyCnt">댓글 순</option>
				</select> <select id="aPagingOption" name="aPagingOption">
					<option value="10" selected="selected">10개씩 보기</option>
					<option value="20">20개씩 보기</option>
					<option value="50">50개씩 보기</option>
				</select>
			</div>
		</div>
		<table class="responsive-table hoverCursor">
			<thead class="responsive-table__head">
				<tr class="responsive-table__row">
					<th class="responsive-table__head__title"></th>
					<th style="width: 40px;" class="responsive-table__head__title">별명(아이디)</th>
					<th style="width: 70px;" class="responsive-table__head__title">최종
						접속일</th>
					<th style="width: 60px;" class="responsive-table__head__title">게시글
						수</th>
					<th style="width: 30px;" class="responsive-table__head__title">댓글
						수</th>
					<th style="width: 20px;" class="responsive-table__head__title">성별</th>
					<th style="width: 20px;" class="responsive-table__head__title">연령</th>
					<th style="width: 20px;" class="responsive-table__head__title"><input
						type="checkbox" class="hoverBtn" id="aCheckAll"></th>
				</tr>
			</thead>
			<tbody class="responsive-table__body" id="aBandMemberTable">
			</tbody>
		</table>
		<div style="height: 38px;">
			<button id="akickBtn" class="formbold-btn formbold-btn-primary"
				style="float: right; margin-top: 10px;">강제탈퇴</button>
		</div>
		<div id="aPaging">
			<nav class="blog-pagination justify-content-center d-flex"
				id="pagegation">
				<!--================ 이전  =================-->
				<ul class="pagination">
					<li class="page-item" th:if="${paging.startPage>1}"><a
						class="page-link" aria-label="Previous"
						th:value="${paging.startPage-1}"> <span aria-hidden="true"><span
								class="lnr lnr-chevron-left pagePort"></span></span></a></li>
					<!--================ 페이지 이동 1_2_3_4_5  =================-->
					<th:block
						th:each="pag:${#numbers.sequence(paging.startPage,paging.endPage)}">
						<li class="page-item" th:if="${pag != paging.page}"><a
							class="page-link pagePort" th:value="${pag}"
							th:text="${#numbers.formatInteger(pag,2)}"></a></li>
						<li class="page-item active" th:if="${pag==paging.page}"><a
							class="page-link" th:text="${#numbers.formatInteger(pag,2)}"></a>
						</li>
					</th:block>
					<!--================ 페이지 이동 1_2_3_4_5 끝 =================-->
					<!--================ 이후  =================-->
					<li class="page-item" th:if="${paging.endPage<paging.lastPage}">
						<a class="page-link pagePort" aria-label="Next"
						th:value="${paging.endPage+1}"> <span aria-hidden="true"><span
								class="lnr lnr-chevron-right"></span></span></a>
					</li>
				</ul>
			</nav>
		</div>
	</div>

	<!-- 모달구간 -->
	<div class="modal_bandMemberInfo">
		<div class="modal-content">
			<span class="closeBtn">&times;</span>
			<div class="modal_nickname">
				<h3 id="modal_nickname"></h3>
			</div>
			<div class="item-row">
				<div id="modal_profileImg"></div>
				<div class="item" id="modal_profileText">
					<span><i class="fa-solid fa-cake-candles"></i><span
						id="modal_birtyday" /></span><br> <span><i
							class="fa fa-solid fa-right-to-bracket"></i><span
							id="modal_signupDate" /></span>
				</div>
			</div>
			<div class="modal_intro">
				<label for="intro">소개말</label> <input type="text"
					class="form-control" name="intro" id="modal_intro" readonly>
			</div>
		</div>
	</div>
	<!-- 모달구간 끝 -->

	<div id="wBandMemberList" style="display: none">
		<div class="item-row optionDiv">
			<div class="item-row">
				<input type="text" class="form-control searchInput"
					placeholder="아이디 또는 별명 검색" id="wMemberSearch"> <span
					class="input-group-btn">
					<button class="btn btn-default searchBtn" type="button"
						id="wSearchBtn">
						<i class="lnr lnr-magnifier"></i>
					</button>
			</div>
			<div class="item-row" style="width: 173px;">
				<span class="hoverCursor" style="margin-right: 5px;"> 승인 대기
					멤버 수 </span> <span id="wMemberCnt"></span>
			</div>
			<input type="hidden" name="wPageNum" value="1"> </span>
			<div class="selectDiv">
				<div style="width: 137px;"></div>
				<select id="wPagingOption" name="wPagingOption">
					<option value="10">10개씩 보기</option>
					<option value="20">20개씩 보기</option>
					<option value="30">50개씩 보기</option>
				</select>
			</div>
		</div>
		<table class="responsive-table hoverCursor">
			<thead class="responsive-table__head">
				<tr class="responsive-table__row">
					<th class="responsive-table__head__title"></th>
					<th class="responsive-table__head__title">별명(아이디)</th>
					<th class="responsive-table__head__title">소개말</th>
					<th class="responsive-table__head__title">성별</th>
					<th class="responsive-table__head__title">연령</th>
					<th class="responsive-table__head__title"><input
						type="checkbox" id="wCheckAll" class="hoverBtn"></th>
				</tr>
			</thead>
			<tbody class="responsive-table__body" id="wBandMemberTable">
			</tbody>
		</table>
		<div style="height: 38px;">
			<button id="wSignBtn" class="formbold-btn formbold-btn-primary"
				style="float: right; margin-top: 10px;">가입 승인</button>
		</div>
		<div id="wPaging">
			<nav class="blog-pagination justify-content-center d-flex"
				id="pagegation">
				<!--================ 이전  =================-->
				<ul class="pagination">
					<li class="page-item" th:if="${paging.startPage>1}"><a
						class="page-link" aria-label="Previous"
						th:value="${paging.startPage-1}"> <span aria-hidden="true"><span
								class="lnr lnr-chevron-left pagePort"></span></span></a></li>
					<!--================ 페이지 이동 1_2_3_4_5  =================-->
					<th:block
						th:each="pag:${#numbers.sequence(paging.startPage,paging.endPage)}">
						<li class="page-item" th:if="${pag != paging.page}"><a
							class="page-link pagePort" th:value="${pag}"
							th:text="${#numbers.formatInteger(pag,2)}"></a></li>
						<li class="page-item active" th:if="${pag==paging.page}"><a
							class="page-link" th:text="${#numbers.formatInteger(pag,2)}"></a>
						</li>
					</th:block>
					<!--================ 페이지 이동 1_2_3_4_5 끝 =================-->
					<!--================ 이후  =================-->
					<li class="page-item" th:if="${paging.endPage<paging.lastPage}">
						<a class="page-link pagePort" aria-label="Next"
						th:value="${paging.endPage+1}"> <span aria-hidden="true"><span
								class="lnr lnr-chevron-right"></span></span></a>
					</li>
				</ul>
			</nav>
		</div>
	</div>

	<div id="kBandMemberList" style="display: none">
		<div class="item-row optionDiv">
			<div class="item-row">
				<input type="text" class="form-control searchInput"
					placeholder="아이디 또는 별명 검색" id="kMemberSearch"> <span
					class="input-group-btn">
					<button class="btn btn-default searchBtn" type="button"
						id="kSearchBtn">
						<i class="lnr lnr-magnifier"></i>
					</button>
			</div>
			<div class="item-row" style="width: 173px;">
				<span class="hoverCursor" style="margin-right: 5px;"> 강제 탈퇴
					멤버 수 </span> <span id="kMemberCnt"></span>
			</div>
			<input type="hidden" name="kPageNum" value="1"> </span>
			<div class="selectDiv">
				<div style="width: 137px;"></div>
				<select id="kPagingOption" name="kPagingOption">
					<option value="10">10개씩 보기</option>
					<option value="20">20개씩 보기</option>
					<option value="30">50개씩 보기</option>
				</select>
			</div>
		</div>
		<table class="responsive-table hoverCursor">
			<thead class="responsive-table__head">
				<tr class="responsive-table__row">
					<th class="responsive-table__head__title"></th>
					<th class="responsive-table__head__title">별명(아이디)</th>
					<th class="responsive-table__head__title">사유</th>
					<th class="responsive-table__head__title">처리일</th>
					<th class="responsive-table__head__title">가입불가여부</th>
					<th class="responsive-table__head__title"><input
						type="checkbox" id="kCheckAll" class="hoverBtn"></th>
				</tr>

			</thead>
			<tbody class="responsive-table__body" id="kBandMemberTable">
			</tbody>
		</table>
		<div style="height: 38px;">
			<button id="kResignBtn" class="formbold-btn formbold-btn-primary"
				style="float: right; margin-top: 10px;">재가입 여부 변경</button>
		</div>
		<div id="kPaging">
			<nav class="blog-pagination justify-content-center d-flex"
				id="pagegation">
				<!--================ 이전  =================-->
				<ul class="pagination">
					<li class="page-item" th:if="${paging.startPage>1}"><a
						class="page-link" aria-label="Previous"
						th:value="${paging.startPage-1}"> <span aria-hidden="true"><span
								class="lnr lnr-chevron-left pagePort"></span></span></a></li>
					<!--================ 페이지 이동 1_2_3_4_5  =================-->
					<th:block
						th:each="pag:${#numbers.sequence(paging.startPage,paging.endPage)}">
						<li class="page-item" th:if="${pag != paging.page}"><a
							class="page-link pagePort" th:value="${pag}"
							th:text="${#numbers.formatInteger(pag,2)}"></a></li>
						<li class="page-item active" th:if="${pag==paging.page}"><a
							class="page-link" th:text="${#numbers.formatInteger(pag,2)}"></a>
						</li>
					</th:block>
					<!--================ 페이지 이동 1_2_3_4_5 끝 =================-->
					<!--================ 이후  =================-->
					<li class="page-item" th:if="${paging.endPage<paging.lastPage}">
						<a class="page-link pagePort" aria-label="Next"
						th:value="${paging.endPage+1}"> <span aria-hidden="true"><span
								class="lnr lnr-chevron-right"></span></span></a>
					</li>
				</ul>
			</nav>
		</div>
	</div>

</body>
<script th:inline="javascript">
	var header = /*[[${_csrf.headerName}]]*/;
	var token = /*[[${_csrf.token}]]*/;

	$(function () {

		/*<![CDATA[*/

		let loginUser = /*[[ ${session.loginUser} ]]*/;
		let loginUserId = loginUser.userId
		/*]]*/

		// 밴드 번호
		const link = window.location.href;
		var url = new URL(link);
		const urlParams = url.searchParams;
		let bandNo = urlParams.getAll('bandNo');
		let aPageNum = $("input[name=aPageNum]").val();
		let wPageNum = $("input[name=wPageNum]").val();
		let kPageNum = $("input[name=kPageNum]").val();

		// 전체 밴드 멤버 리스트 관련 변수
		var aSelectOption = $("select[name=aSelectOption]").val();
		var aPagingOption = $("select[name=aPagingOption]").val();
		var aSearchVal = $("input[name=aSearchVal]").val();
		// 가입 대기 중 밴드 멤버 리스트 관련 변수
		var wPagingOption = $("select[name=wPagingOption]").val();
		var wSearchVal = $("input[name=wSearchVal]").val();
		// 강퇴된 밴드 멤버 리스트 관련 변수
		var kPagingOption = $("select[name=kPagingOption]").val();
		var kSearchVal = $("input[name=kSearchVal]").val();

		// 함수 실행 
		allBandMemberList();

		// li 클릭
		$("#allBandMemberLi").click(function () {
			$("#aBandMemberList").show();
			$("#wBandMemberList").hide();
			$("#kBandMemberList").hide();
		});

		// 체크박스 전체선택 전체 해제 하기
		$(document).on('click', '#aCheckAll', function () {
			$('.aKickCheck:not(:disabled)').not(this).prop('checked', this.checked);
			if ($('.aKickCheck:not(:disabled)').not(this).is(":checked")) {
				$('.aKickCheck:not(:disabled)').not(this).parent().parent().next().css("display", "");
			} else {
				$('.aKickCheck:not(:disabled)').not(this).parent().parent().next().css("display", "none");
			}
		});
		// 전체 멤버 목록에서 강퇴버튼 누르면 체크박스 눌린 애들  
		$(document).on("change", ".aKickCheck", function () {
			if ($(this).is(":checked")) {
				$(this).parent().parent().next().css("display", "");
			} else {
				$(this).parent().parent().next().css("display", "none");
			}
		});
		// 체크박스 전체선택 전체 해제 하기
		$(document).on('click', '#wCheckAll', function () {
			$('.wJoinCheck:not(:disabled)').not(this).prop('checked', this.checked);

		});
		// 체크박스 전체선택 전체 해제 하기
		$(document).on('click', '#kCheckAll', function () {
			$('.kResignCheck:not(:disabled)').not(this).prop('checked', this.checked);
		});

		// 첫 div 밴드 멤버 리스트 띄워주는 함수
		function allBandMemberList() {
			aSelectOption = $("select[name=aSelectOption]").val();
			aPagingOption = $("select[name=aPagingOption]").val();
			aSearchVal = $("input[name=aSearchVal]").val();
			let listOption = { bandNo: bandNo[0], selectOption: aSelectOption, paging: { pageUnit: aPagingOption, page: aPageNum }, bandNickname: aSearchVal };

			$.ajax({
				url: '/own/band/bandGroup/GetAllMemberList',
				method: 'POST',
				data: JSON.stringify(listOption),
				contentType: "application/json",
				beforeSend: function (xhr) {
					xhr.setRequestHeader(header, token);
				},
				success: function (result) {
					$('#aBandMemberTable').empty();
					$.each(result, function (i, e) {
						// 성별 td
						let genderTd = ''
						if (e.bandGender == 'GD01') {
							genderTd = `<td class="responsive-table__body__text" >남자</td>`;
						} else {
							genderTd = `<td class="responsive-table__body__text" >여자</td>`;
						}
						// 최종 tr
						let tr = '';
						if(e.userId == loginUserId){
							tr = `<tr class="responsive-table__row">
									<td class="responsive-table__body__text modalOpen" style="width: 50px;"><img src="/imgView/${e.profileImg}" class="hoverBtn" style="height: 50px; width: 50px; border-radius: 30%; object-fit: cover"/></td>
									<td hidden>${e.userId}</td>
									<td class="responsive-table__body__text" style="width: 140px;" >${e.bandNickname}(${e.userId})<i class="fa fa-solid fa-crown" style="color:#f8b600;"></i></td>
									<td class="responsive-table__body__text" >${e.bandAccessDate}</td>
									<td class="responsive-table__body__text" >${e.boardCnt}</td>
									<td class="responsive-table__body__text" >${e.replyCnt}</td>
									${genderTd}
									<td class="responsive-table__body__text" >${e.age}</td>
									<td class="responsive-table__body__text" ></td>
						 		</tr>`;
						} else {
							tr = `<tr class="responsive-table__row">
									<td class="responsive-table__body__text modalOpen" style="width: 50px;"><img src="/imgView/${e.profileImg}" class="hoverBtn" style="height: 50px; width: 50px; border-radius: 30%; object-fit: cover"/></td>
									<td hidden>${e.userId}</td>
									<td class="responsive-table__body__text" style="width: 140px;">${e.bandNickname}(${e.userId})</td>
									<td class="responsive-table__body__text" >${e.bandAccessDate}</td>
									<td class="responsive-table__body__text" >${e.boardCnt}</td>
									<td class="responsive-table__body__text" >${e.replyCnt}</td>
									${genderTd}
									<td class="responsive-table__body__text" >${e.age}</td>
									<td class="responsive-table__body__text" ><input type="checkbox" class="aKickCheck hoverBtn" value=${e.userId}></td>
						 		</tr>
						 		<tr class="responsive-table__row" style="display:none" class="responsive-table__row">
									<td  class="responsive-table__body__text" colspan="1"><input id="bandMemberNo" type="hidden" value=${e.bandMemberNo}></td>
									<td  class="responsive-table__body__text" colspan="8">
										<textarea maxlength="20" class="reasoninput"></textarea>
										<span class="textCount">0자</span>
										<span class="textTotal">/20자</span>
										<p><label for="aResignCheck">회원의 재가입을 허용하지 않습니다.</label>
										<input type="checkbox" class="aResignCheck hoverBtn" value="aResignCheck"></p>
									</td class="responsive-table__body__text" >
						 		</tr>`;
						}
						$('#aBandMemberTable').append(tr);
					})
					//페이지 버튼 만들기
					$('#aPaging #pagegation').empty();
					let pagingM = result[0].paging;
					//시작 버튼
					let startpageTag = $('<ul class="pagination" />');
					$('#aPaging #pagegation').append(startpageTag);
					//이전 버튼만들기
					if (pagingM.startPage > 1) {
						let pageBeforTag = `<li class="page-item">
		                            <a class="page-link" aria-label="Previous" value=${pagingM.startPage - 1}>
		                           <span aria-hidden="true"><span class="lnr lnr-chevron-left pagePort"></span></span></a>
		                           </li>`
						startpageTag.append(pageBeforTag);
					}
					//페이지목록..
					for (let pg = pagingM.startPage; pg <= pagingM.endPage; pg++) {
						if (pg != pagingM.page) {
							let pageTag = `<li class="page-item">
		                           <a class="page-link pagePort" value=${pg}>${pg}</a>
		                           </li>`
							startpageTag.append(pageTag);
						} else if (pg == pagingM.page) {
							let pageTag = `<li class="page-item active">
		                           <a class="page-link" >${pg}</a>
		                           </li>`
							startpageTag.append(pageTag);
						}
					}
					//이후 버튼만들기
					if (pagingM.endPage < pagingM.lastPage) {
						let pageAfterTag = `<li class="page-item">
		                           <a class="page-link pagePort" aria-label="Next" value=${pagingM.endPage + 1}>
		                           <span aria-hidden="true"><span class="lnr lnr-chevron-right"></span></span></a>
		                           </li>`
						startpageTag.append(pageAfterTag);
					}
					$('#aPaging #pagegation').append(startpageTag)
				} //end of ajax
			})
		}

		//모달시작
		$(document).on('click', '.modalOpen', function () {
			$(".modal_bandMemberInfo").css("display", "block");
			let trUserId = $(this).next().text();
			// 정보 가져 오는 아작아작스 실행 
			$.ajax({
				url: '/own/band/bandGroup/selectBandMemberInfo?bandNo=' + bandNo + '&userId=' + trUserId,
				method: 'get',
				dataType: 'json',
				contentType: "application/json"
			}).then(res => {
				$("#modal_profileImg").empty();
				$("#modal_info").empty();
				$("#modal_birtyday").empty();
				$("#modal_signupDate").empty();
				// 프로필이미지
				let modal_profileImg = "";
				modal_profileImg = $('<img>').attr({
					"src": "/imgView/" + res[0].profileImg, "class": "modal_profileImg"
				})
				$('#modal_profileImg').append(modal_profileImg);
				// 닉네임
				$('#modal_nickname').text(res[0].bandNickname);
				// 생일, 가입날짜
				$('#modal_signupDate').text(res[0].bandSignupDate);
				$('#modal_birtyday').text(res[0].bandBirth);
				// 소개글
				$('#modal_intro').val(res[0].bandMemberIntro);
			})
		});

		// <span> 태그(X 버튼)를 클릭하면 Modal을 닫기
		$('.closeBtn').click(function () {
			$(".modal_bandMemberInfo").css("display", "none");
		});

		// Modal 영역 밖을 클릭하면 Modal을 닫기
		window.onclick = function (event) {
			if (event.target.className == "modal_bandMemberInfo") {
				event.target.style.display = "none";
			}
		};

		// 가입한 멤버 리스트 - 강퇴 버튼
		$(document).on('click', '#akickBtn', function () {
			const idArr = [];
			const reasonArr = [];
			const resignArr = [];
			const checked = $(".aKickCheck");
			const aResignCheck = $(".aResignCheck");
			let bandMemberKickReason = $(".reasoninput");
			// 버튼 개수만큼 반복
			for (let i = 0; i < checked.length; i++) {
				// 속성중에 체크 된 항목이 있을 경우
				if (checked[i].checked == true) {
					if (aResignCheck[i].checked == true) {
						idArr.push(checked[i].value);
						reasonArr.push(bandMemberKickReason[i].value);
						resignArr.push('BL01');
					} else {
						idArr.push(checked[i].value);
						reasonArr.push(bandMemberKickReason[i].value);
						resignArr.push('BL02');
					}
				}
			}
			for (let i = 0; i < idArr.length; i++) {
				let dataArr = { bandNo: bandNo[0], userId: idArr[i], bandMemberStatus: 'BA03', bandMemberKickReason: reasonArr[i], bandKickStatus: resignArr[i] };
				// 업데이트 돌리기 돌리기
				$.ajax({
					url: '/own/band/bandGroup/updateBandMemberStatus',
					method: 'POST',
					data: JSON.stringify(dataArr),
					contentType: "application/json",
					beforeSend: function (xhr) {
						xhr.setRequestHeader(header, token);
					},
					success: function (result) {
						allBandMemberList();
					}
				})
			}
		}); // end of 강퇴

		// 첫 div 밴드 멤버 리스트 페이징 함수, 검색창, 셀렉트 박스
		$('#aPaging #pagegation').on('click', '.pagePort', function () {
			//페이지번호 + 밴드식별번호
			aPageNum = $(this).attr('value');
			allBandMemberList();
		}) // end of aPaging

		$('#aSearchBtn').on('click', function () {
			allBandMemberList();
		}) // end of searchBtn

		$("#aSelectOption").change(function () {
			allBandMemberList();
		}) // end of selectOption

		$("#aPagingOption").change(function () {
			allBandMemberList();
		}) // end of aPagingOption

		// 강퇴 사유 글자수 제한
		$(document).on('keyup', '.reasoninput', function (e) {
			let content = $(this).val();
			// 글자수 세기
			if (content.length == 0 || content == '') {
				$('.textCount').text('0자');
			} else {
				$('.textCount').text(content.length + '자');
			}
			// 글자수 제한
			if (content.length > 20) {
				// 100자 부터는 타이핑 되지 않도록
				$(this).val($(this).val().substring(0, 100));
			};
		});

		// 가입대기중 리스트 생성 함수
		function waitingBandMemberList() {
			wPagingOption = $("select[name=wPagingOption]").val();
			wSearchVal = $("input[name=wSearchVal]").val();
			let listOption = { bandNo: bandNo[0], paging: { pageUnit: wPagingOption, page: wPageNum }, userId: wSearchVal };

			$.ajax({
				url: '/own/band/bandGroup/getWaitingMemberList',
				method: 'POST',
				data: JSON.stringify(listOption),
				contentType: "application/json",
				beforeSend: function (xhr) {
					xhr.setRequestHeader(header, token);
				},
				success: function (result) {
					$('#wBandMemberTable').empty();
					$.each(result, function (i, e) {
						//성별 td
						let genderTd = ''
						if (e.bandGender == 'GD01') {
							genderTd = `<td class="responsive-table__body__text">남자</td>`;
						} else {
							genderTd = `<td class="responsive-table__body__text">여자</td>`;
						}
						var td = `<tr class="responsive-table__row">
									<td class="responsive-table__body__text"><img src="/imgView/${e.profileImg}" style="height: 50px; width: 50px; border-radius: 30%; object-fit: cover"/></td>
									<td class="responsive-table__body__text">${e.bandNickname}(${e.userId})</td>
									<td class="responsive-table__body__text">${e.bandMemberIntro}</td>
									${genderTd}
									<td class="responsive-table__body__text">${e.age}</td>
									<td class="responsive-table__body__text"><input type="checkbox" class="wJoinCheck" value=${e.userId}></td>
								</tr>`;
						$('#wBandMemberTable').append(td);
					})
					//페이지 버튼 만들기
					$('#wPaging #pagegation').empty();
					let pagingM = result[0].paging;
					//시작 버튼
					let startpageTag = $('<ul class="pagination" />');
					$('#wPaging #pagegation').append(startpageTag);
					//이전 버튼만들기
					if (pagingM.startPage > 1) {
						let pageBeforTag = `<li class="page-item">
		                           <a class="page-link" aria-label="Previous" value=${pagingM.startPage - 1}>
		                           <span aria-hidden="true"><span class="lnr lnr-chevron-left pagePort"></span></span></a>
		                           </li>`
						startpageTag.append(pageBeforTag);
					}
					//페이지목록..
					for (let pg = pagingM.startPage; pg <= pagingM.endPage; pg++) {
						if (pg != pagingM.page) {
							let pageTag = `<li class="page-item">
		                           <a class="page-link pagePort" value=${pg}>${pg}</a>
		                           </li>`
							startpageTag.append(pageTag);
						} else if (pg == pagingM.page) {
							let pageTag = `<li class="page-item active">
		                           <a class="page-link" >${pg}</a>
		                           </li>`
							startpageTag.append(pageTag);
						}
					}
					//이후 버튼만들기
					if (pagingM.endPage < pagingM.lastPage) {
						let pageAfterTag = `<li class="page-item">
		                           <a class="page-link pagePort" aria-label="Next" value=${pagingM.endPage + 1}>
		                           <span aria-hidden="true"><span class="lnr lnr-chevron-right"></span></span></a>
		                           </li>`
						startpageTag.append(pageAfterTag);
					}
					$('#wPaging #pagegation').append(startpageTag)
				} //end of ajax
			})
		}; // end of waitingBandMemberList함수

		// 가입대기중 멤버 목록 li 클릭
		$("#waitingBandMemberLi").click(function () {
			$("#wBandMemberList").show();
			$("#aBandMemberList").hide();
			$("#kBandMemberList").hide();

			waitingBandMemberList();
		});// end of 가입대기중 li 클릭 함수 

		// 가입대기중 멤버 리스트 페이징 함수, 검색창, 셀렉트 박스
		$('#wPaging #pagegation').on('click', '.pagePort', function () {
			//페이지번호 + 밴드식별번호
			wPageNum = $(this).attr('value');
			waitingBandMemberList();
		}) // end of aPaging

		$('#wSearchBtn').on('click', function () {
			waitingBandMemberList();
		}) // end of searchBtn

		$("#wPagingOption").change(function () {
			waitingBandMemberList();
		}) // end of aPagingOption

		// 가입 대기 멤버 리스트 - 가입 승인 버튼
		$('#wSignBtn').on('click', function () {
			const idArr = [];
			const checked = $(".wJoinCheck");
			// 버튼 개수만큼 반복
			for (let i = 0; i < checked.length; i++) {
				// 속성중에 체크 된 항목이 있을 경우
				if (checked[i].checked == true) {
					idArr.push(checked[i].value);
				}
			}
			for (let i = 0; i < idArr.length; i++) {
				let userId = idArr[i];
				let dataArr = { bandNo: bandNo[0], userId: userId, bandMemberStatus: 'BA02' };
				// 업데이트 돌리기 돌리기
				$.ajax({
					url: '/own/band/bandGroup/updateBandMemberStatus',
					method: 'POST',
					data: JSON.stringify(dataArr),
					contentType: "application/json",
					beforeSend: function (xhr) {
						xhr.setRequestHeader(header, token);
					},
					success: function (result) {
						waitingBandMemberList();
					}
				})
			}
		}); // end of 가입승인

		// 강퇴된 멤버 리스트 생성 함수
		function kickedBandMemberList() {
			kPagingOption = $("select[name=kPagingOption]").val();
			kSearchVal = $("input[name=kSearchVal]").val();
			let listOption = { bandNo: bandNo[0], paging: { pageUnit: kPagingOption, page: kPageNum }, userId: kSearchVal };

			$.ajax({
				url: '/own/band/bandGroup/getkickedMemberList',
				method: 'POST',
				data: JSON.stringify(listOption),
				contentType: "application/json",
				beforeSend: function (xhr) {
					xhr.setRequestHeader(header, token);
				},
				success: function (result) {
					$('#kBandMemberTable').empty();
					$.each(result, function (i, e) {
						//재가입조건 td
						let reJoinTd = ''
						if (e.bandMemberRejoin == 'BL01') {
							reJoinTd = `<td class="responsive-table__body__text">가입불가</td>`;
						} else {
							reJoinTd = `<td class="responsive-table__body__text">가입가능</td>`;
						}
						var td = `<tr class="responsive-table__row">
									<td class="responsive-table__body__text"><img src="/imgView/${e.profileImg}" style="height: 50px; width: 50px; border-radius: 30%; object-fit: cover"/></td>
									<td class="responsive-table__body__text">${e.bandNickname}(${e.userId})</td>
									<td class="responsive-table__body__text">${e.bandMemberKickReason}</td>
									<td class="responsive-table__body__text">${e.bandKickDate}</td>
									${reJoinTd}
									<td class="responsive-table__body__text"><input type="checkbox" class="kResignCheck" value=${e.userId}></td>
								</tr>`;
						$('#kBandMemberTable').append(td);
					})
					//페이지 버튼 만들기
					$('#kPaging #pagegation').empty();
					let pagingM = result[0].paging;
					//시작 버튼
					let startpageTag = $('<ul class="pagination" />');
					$('#kPaging #pagegation').append(startpageTag);
					//이전 버튼만들기
					if (pagingM.startPage > 1) {
						let pageBeforTag = `<li class="page-item">
		                           <a class="page-link" aria-label="Previous" value=${pagingM.startPage - 1}>
		                           <span aria-hidden="true"><span class="lnr lnr-chevron-left pagePort"></span></span></a>
		                           </li>`
						startpageTag.append(pageBeforTag);
					}
					//페이지목록..
					for (let pg = pagingM.startPage; pg <= pagingM.endPage; pg++) {
						if (pg != pagingM.page) {
							let pageTag = `<li class="page-item">
		                           <a class="page-link pagePort" value=${pg}>${pg}</a>
		                           </li>`
							startpageTag.append(pageTag);
						} else if (pg == pagingM.page) {
							let pageTag = `<li class="page-item active">
		                           <a class="page-link" >${pg}</a>
		                           </li>`
							startpageTag.append(pageTag);
						}
					}
					//이후 버튼만들기
					if (pagingM.endPage < pagingM.lastPage) {
						let pageAfterTag = `<li class="page-item">
		                           <a class="page-link pagePort" aria-label="Next" value=${pagingM.endPage + 1}>
		                           <span aria-hidden="true"><span class="lnr lnr-chevron-right"></span></span></a>
		                           </li>`
						startpageTag.append(pageAfterTag);
					}
					$('#kPaging #pagegation').append(startpageTag)
				} //end of ajax
			})
		}; // end of 강퇴된 멤버 리스트 함수

		// 강퇴한 멤버리스트 - 재가입 상태변경 버튼
		$('#kResignBtn').on('click', function () {
			const idArr = [];
			const rejoinStatusArr = [];
			const checked = $(".kResignCheck");
			// 버튼 개수만큼 반복
			for (let i = 0; i < checked.length; i++) {
				// 속성중에 체크 된 항목이 있을 경우
				if (checked[i].checked == true) {
					idArr.push(checked[i].value);
					if (checked[i].parentElement.previousSibling.textContent == '가입불가') {
						rejoinStatusArr.push('BL02');
					} else {
						rejoinStatusArr.push('BL01');
					}
				}
			}
			for (let i = 0; i < idArr.length; i++) {
				let dataArr = { bandNo: bandNo[0], userId: idArr[i], bandMemberStatus: 'BA03', bandMemberRejoin: rejoinStatusArr[i] };
				// 업데이트 돌리기 돌리기
				$.ajax({
					url: '/own/band/bandGroup/updateBandMemberStatus',
					method: 'POST',
					data: JSON.stringify(dataArr),
					contentType: "application/json",
					beforeSend: function (xhr) {
						xhr.setRequestHeader(header, token);
					},
					success: function (result) {
						kickedBandMemberList();
					}
				})
			}
		}); // end of 재가입 여부 변경

		// 강퇴된 멤버 목록 li 클릭
		$("#kickedBandMemberLi").click(function () {
			$("#kBandMemberList").show();
			$("#wBandMemberList").hide();
			$("#aBandMemberList").hide();

			kickedBandMemberList();
		});// end of 강퇴된 li 클릭 함수 

		// 강퇴된 멤버 리스트 페이징 함수, 검색창, 셀렉트 박스
		$('#kPaging #pagegation').on('click', '.pagePort', function () {
			//페이지번호 + 밴드식별번호
			kPageNum = $(this).attr('value');
			kickedBandMemberList();
		}) // end of aPaging

		$('#kSearchBtn').on('click', function () {
			kickedBandMemberList();
		}) // end of searchBtn

		$("#kPagingOption").change(function () {
			kickedBandMemberList();
		}) // end of aPagingOption

		// 멤버수 세기
		counting();
		function counting() {
			$.ajax({
				url: '/own/band/bandGroup/memberCount?bandNo=' + bandNo + '&bandMemberStatus=' + 'BA02',
				method: 'get',
				dataType: 'json',
				contentType: "application/json"
			}).then(list => {
				$("#aMemberCnt").text(list);
			})
			$.ajax({
				url: '/own/band/bandGroup/memberCount?bandNo=' + bandNo + '&bandMemberStatus=' + 'BA01',
				method: 'get',
				dataType: 'json',
				contentType: "application/json"
			}).then(list => {
				$("#wMemberCnt").text(list);
			})
			$.ajax({
				url: '/own/band/bandGroup/memberCount?bandNo=' + bandNo + '&bandMemberStatus=' + 'BA03',
				method: 'get',
				dataType: 'json',
				contentType: "application/json"
			}).then(list => {
				$("#kMemberCnt").text(list);
			})
		} // end of counting함수

		// 상단 메뉴
		$('#menu-filters li').click(function () {
			$('#menu-filters li').removeClass('active');
			$(this).addClass('active');
		})

	}) // end of function
	$(document).ready(function () {
		$('select').niceSelect();
	})

</script>