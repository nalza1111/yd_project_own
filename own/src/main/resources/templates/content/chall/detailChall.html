<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" lang="ko">

<head>
<!-- jquery -->
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<meta content="width=device-width, initial-scale=1.0" name="viewport" />
<meta content="Free HTML Templates" name="keywords" />
<!-- Favicon -->
<link href="/css/chall/img/favicon.ico" rel="icon" />
<!-- Google Web Fonts -->
<link rel="preconnect" href="https://fonts.gstatic.com" />
<link
	href="https://fonts.googleapis.com/css2?family=Handlee&family=Nunito&display=swap"
	rel="stylesheet" />
<!-- Font Awesome -->
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
	rel="stylesheet" />
<!-- Flaticon Font -->
<link href="/css/chall/lib/flaticon/font/flaticon.css" rel="stylesheet" />
<!-- Libraries Stylesheet -->
<link href="/css/chall/lib/owlcarousel/assets/owl.carousel.min.css"
	rel="stylesheet" />
<link href="/css/chall/lib/lightbox/css/lightbox.min.css"
	rel="stylesheet" />
<!-- Customized Bootstrap Stylesheet -->
<link href="/css/chall/css/style.css" rel="stylesheet" />
<!-- JavaScript Libraries -->
<script
	src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
<script src="/css/chall/lib/easing/easing.min.js"></script>
<script src="/css/chall/lib/owlcarousel/owl.carousel.min.js"></script>
<script src="/css/chall/lib/isotope/isotope.pkgd.min.js"></script>
<script src="/css/chall/lib/lightbox/js/lightbox.min.js"></script>
<!-- Contact Javascript File -->
<script src="/css/chall/mail/jqBootstrapValidation.min.js"></script>
<script src="/css/chall/mail/contact.js"></script>
<!-- Template Javascript -->
<script src="/css/chall/js/main.js"></script>
<!-- google chart -->
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
<meta charset="utf-8">
<title>OWN _ 도전 상세</title>
</head>

<body>
	<!-- <div layout:fragment="content"> -->
	<!-- Navbar Start -->
	<div class="container-fluid bg-light position-relative shadow">
		<nav
			class="navbar navbar-expand-lg bg-light navbar-light py-3 py-lg-0 px-0 px-lg-5">
			<a href="" class="navbar-brand font-weight-bold text-secondary"
				style="font-size: 50px"> <i class="flaticon-043-teddy-bear"></i>
				<span class="text-primary">OWN_Challenges</span>
			</a>
			<button type="button" class="navbar-toggler" data-toggle="collapse"
				data-target="#navbarCollapse">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse justify-content-between"
				id="navbarCollapse">
				<div class="navbar-nav font-weight-bold mx-auto py-0">
					<a href="index.html" class="nav-item nav-link">Home</a> <a
						href="about.html" class="nav-item nav-link">About</a> <a
						href="class.html" class="nav-item nav-link">Classes</a> <a
						href="team.html" class="nav-item nav-link">Teachers</a> <a
						href="gallery.html" class="nav-item nav-link">Gallery</a>
					<div class="nav-item dropdown">
						<a href="#" class="nav-link dropdown-toggle"
							data-toggle="dropdown">Pages</a>
						<div class="dropdown-menu rounded-0 m-0">
							<a href="blog.html" class="dropdown-item">Blog Grid</a> <a
								href="single.html" class="dropdown-item">Blog Detail</a>
						</div>
					</div>
					<a href="contact.html" class="nav-item nav-link active">Contact</a>
				</div>
				<a href="" class="btn btn-primary px-4">Join Class</a>
			</div>
		</nav>
	</div>
	<!-- Navbar End -->

	<!-- Header Start -->
	<div class="container-fluid bg-primary mb-5">
		<div
			class="d-flex flex-column align-items-center justify-content-center"
			style="min-height: 400px">
			<h3 class="display-3 font-weight-bold text-white">Contact Us</h3>
			<div class="d-inline-flex text-white">
				<p class="m-0">
					<a class="text-white" href="">Home</a>
				</p>
				<p class="m-0 px-2">/</p>
				<p class="m-0">Contact Us</p>
			</div>
		</div>
	</div>
	<!-- Header End -->

	<!-- Detail Start -->
	<div class="container py-5">
		<div class="row pt-5">
			<div class="col-lg-8">
				<div class="d-flex flex-column text-left mb-3">
					<p class="section-title pr-5">
						<span class="pr-2">About Challenges</span>
					</p>
					<h1 class="mb-3" th:text="${detailChall.challTitle}"></h1>
					<div class="d-flex">
						<p class="mr-3">
							<i class="fa fa-user text-primary"></i> Admin
						</p>
						<p class="mr-3">
							<i class="fa fa-folder text-primary"></i> Web Design
						</p>
						<p class="mr-3">
							<i class="fa fa-comments text-primary"></i> 15
						</p>
					</div>
				</div>

				<!--대표사진 및 설명 + 신청 -->
				<div class="mb-5">
					<img th:src="|/imgView/${challImg[0].mediaServerFile}|"
						class="img-fluid rounded w-100 mb-4" alt="대표사진" />
					<div class="row pt-2 pb-4" style="justify-content: center;">
						<div class="col-6 col-md-12">
							<i class="fa-sharp fa-solid fa-share-nodes"></i>
							<h2 class="fa fa-regular fa-share text-primary"></h2>
							<h2 class="fa fa-regular fa-bookmark text-primary" id="bmBtn"></h2>
							<h2 class="fa fa-solid fa-bookmark text-primary" id="bmBtn"
								style="font-weight: 100;"></h2>
							<p class="mr-3">
								<i class="fa fa-users text-primary"></i> 8명 참여중
							</p>
							<h6>
								도전카테고리: <span th:text="${detailChall.challCategory}"></span>
							</h6>
							<h6>
								도전카테고리: <span th:text="${detailChall.challCategory}"></span>
							</h6>
							<h6>
								도전태그: <span th:text="${detailChall.challTag}"></span>
							</h6>
							<ul class="list-inline m-0">
								<li class="py-2 border-top border-bottom"><i
									class="fa fa-check text-primary mr-3"></i> 시작날짜: <span
									th:text="${detailChall.challStartdate}"></span></li>
								<li class="py-2 border-bottom"><i
									class="fa fa-check text-primary mr-3"></i> 도전기간: <span
									th:text="${detailChall.challFreq}"></span>주</li>
								<li><i class="fa fa-check text-primary mr-3"></i> 도전빈도: 주 <span
									th:text="${detailChall.challDuration}"></span> 회</li>
							</ul>
							<button>
								도전금액:<span th:text="${detailChall.challPrice}"></span>
							</button>
						</div>
						<a th:if="${memcheck !=null }"
							class="btn btn-primary mt-2 py-2 px-4">이미 참여중인 도전</a> <a
							th:if="${memcheck ==null }"
							class="btn btn-primary mt-2 py-2 px-4" id="applyBtn">도전 신청하기</a>
						<div th:if="${myInfo}">
							<a th:if="${leaderInfo.userId == myInfo.userId }"
								class="btn btn-primary mt-2 py-2 px-4" id="resultProc">도전
								결과처리하기</a>
						</div>
					</div>
				</div>
				
				<!--대표사진 및 설명 + 신청 end-->

				<!--도전정보시작-->
				<div class="mb-5" style="display: inline-block;">
					<!--줄 -->
					<div class="d-flex flex-column text-left mb-3">
						<div class="d-flex flex-column text-left mb-3">
							<p class="section-title pr-5"></p>
						</div>
						<!--한줄바 -->
						<div class="row">
							<div class="col-12 text-left mb-2">
								<ul class="list-inline mb-4" id="menu-filters">
									<li class="btn btn-outline-primary m-1 active" data-filter="*"
										id="detailBtn">상세보기</li>
									<th:block th:if="${myInfo}">
										<li class="btn btn-outline-primary m-1"
											th:if="${memcheck !=null }" data-filter=".first" id="vldBtn">
											인증하기</li>
										<li class="btn btn-outline-primary m-1"
											th:if="${memcheck !=null }" data-filter=".second"
											id="resultBtn">도전 달성률</li>
										<li class="btn btn-outline-primary m-1"
											th:if="${leaderInfo.userId == myInfo.userId }"
											data-filter=".third" id="memBtn">회원보기</li>
									</th:block>
								</ul>
							</div>
						</div>
					</div>
					<!-- 메뉴 한줄 바 end -->


					<!-- 여기 이 부분을 아작스로 수정해야한다..-->
					<!--여기는 상세정보 탭-->
					<div style="display: inline-block;" id="challDetail">
						<!-- 상세보기 소제목 -->
						<h1 class="mb-3">Diam dolor est ipsum clita lorem</h1>
						<div class="d-flex">
							<p class="mr-3">
								<i class="fa fa-user text-primary"></i> Admin
							</p>
							<p class="mr-3">
								<i class="fa fa-folder text-primary"></i> Web Design
							</p>
							<p class="mr-3">
								<i class="fa fa-comments text-primary"></i> 15
							</p>
						</div>
						<div class="mb-5" id="detailC"
							style="display: inline-block; height: auto; overflow: hidden;">
							<p>
								인증방법: <span th:text="${detailChall.vldMethod}"></span>
							</p>
							<h2 class="mb-4">Sucess Case</h2>
							<img th:src="|/imgView/${challImg[1].mediaServerFile}|"
								alt="vldSucess"
								class="img-fluid rounded w-50 float-left mr-4 mb-3" />
							<p style="width: 100;">이렇게 어쩌고저쩌고 하면 성공 계속길게 어쩌구저쩍</p>
							<h3 class="mb-4">Fail Case</h3>
							<img th:src="|/imgView/${challImg[2].mediaServerFile}|"
								alt="vldFail"
								class="img-fluid rounded w-50 float-left mr-4 mb-3" />
							<p>실패 덜덜</p>
						</div>
					</div>
					<!--여기는 상세정보 끝-->
					<!--상세정보 끝-->

					<!--달성률 시작-->
					<div style="display: none;" id="challResult">
						<h1>달성률탭</h1>
						<div style="width: 400px; height: 400px;">
							<canvas id="myChart"></canvas>
						</div>
						<input type="hidden" id="resultCheck" value="false">
					</div>
					<!--달성률 탭-->

					<!--인증하기 탭-->
					<div style="display: none;" id="challVld">
						<div class="bg-light p-5" style="width: 550px;">
							<input type="hidden" id="vldCheck" value="false">
							<h2 class="mb-4">Validation GoGo</h2>
							<div id="image_preview">
								<!--이미지 미리보기-->

								<form action="/own/chall/insertVldForm" method="post"
									id="insertChall" enctype="multipart/form-data">
									<input type="hidden" th:name="${_csrf.parameterName}"
										th:value="${_csrf.token}">
									<div class="form-group">
										<!--도전번호, 유저 아이디 히든 -->
										<input id="challNo" name="challNo" type="hidden"
											th:value="${detailChall.challNo}" /> <input id="userId"
											name="userId" type="hidden" th:if="${memcheck !=null }"
											th:value="${memcheck.userId}" /> <label for="name">NickName
											*</label> <input type="text" class="form-control" id="vldname"
											th:if="${memcheck !=null }" th:value="${myInfo.memNickname}"
											readonly />
									</div>
									<div class="form-group">
										<label for="name">Date *</label> <input type="text"
											class="form-control" id="vldname"
											th:value="${#calendars.format(#calendars.createNow(), 'yyyy-MM-dd')}"
											readonly />
									</div>
									<input name="uploadfile" type="file" id="btnAtt">
									<!--<label for="btnAtt">이미지 첨부</label> 라벨이 안먹혀요 ㅠㅠ 도와주실분-->
									<div id="att_zone" data-placeholder='사진을 첨부하세요'></div>
									<br>
									<div class="form-group mb-0">
										<!-- <button type="submit" class="btn btn-primary px-3" id="vldFormSubmit">등록</button> -->
										<input type="submit" value="등록인풋" class="btn btn-primary px-3"
											id="vldFormSubmit" />
									</div>
								</form>
							</div>
						</div>


						<div class="row portfolio-container" id="vldImg"
							style="width: 550px;">
							<div class="col-12 text-center mb-2">
								<ul class="list-inline mb-4">
									<li class="btn btn-outline-primary m-1 active" id="dataFilter"
										data-filter=".">MY</li>
									<li class="btn btn-outline-primary m-1" data-filter="*">
									ALL</li>
								</ul>
							</div>
						</div>

					</div>

					<!--멤버리스트 탭-->
					<div style="display: none;" id="challMem">
						<input type="hidden" id="challMemCheck" value="false">
						<h1>멤버 리스트 탭</h1>
					</div>
					<!--멤버리스트 탭 끝-->

				</div>
				<!-- 도전정보 끝 -->

				<div></div>
				<!-- Comment Form -->
				<div class="bg-light p-5" style="display: none;">
					<h2 class="mb-4">Leave a comment</h2>
					<form>
						<div class="form-group">
							<label for="name">Name *</label> <input type="text"
								class="form-control" id="name" />
						</div>
						<div class="form-group">
							<label for="email">Email *</label> <input type="email"
								class="form-control" id="email" />
						</div>
						<div class="form-group">
							<label for="website">Website</label> <input type="url"
								class="form-control" id="website" />
						</div>

						<div class="form-group">
							<label for="message">Message *</label>
							<textarea id="message" cols="30" rows="5" class="form-control"></textarea>
						</div>
						<div class="form-group mb-0">
							<input type="submit" value="Leave Comment"
								class="btn btn-primary px-3" />
						</div>
					</form>
				</div>
			</div>

			<div class="col-lg-4 mt-5 mt-lg-0">

				<!-- 도전리더 프로필 -->
				<div
					class="d-flex flex-column text-center bg-primary rounded mb-5 py-5 px-4">
					<div th:if="${leaderInfo.memImage}">
					<p class="text-white">CHALLL LEADER</p>
						<!-- 도전리더 프로필 있는 경우-->
						<img th:src="|/imgView/${leaderInfo.memImage}|"
							class="img-fluid rounded-circle mx-auto mb-4"
							style="width: 200px; height:200px ; object-fit: cover" />
					</div>
					<h3 class="text-secondary mb-3" th:text="${leaderInfo.memNickname}"></h3>
					<p class="text-white m-0" th:text="${leaderInfo.memIntro}"></p>
				</div>

				<!-- Search Form -->
				<div class="mb-5">
					<form action="">
						<div class="input-group">
							<input type="text" class="form-control form-control-lg"
								placeholder="Keyword" />
							<div class="input-group-append">
								<span class="input-group-text bg-transparent text-primary"><i
									class="fa fa-search"></i></span>
							</div>
						</div>
					</form>
				</div>

				<!-- Category List -->
				<div class="mb-5">
					<h2 class="mb-4">Categories</h2>
					<ul class="list-group list-group-flush">
						<li
							class="list-group-item d-flex justify-content-between align-items-center px-0">
							<a href="">Web Design</a> <span
							class="badge badge-primary badge-pill">150</span>
						</li>
						<li
							class="list-group-item d-flex justify-content-between align-items-center px-0">
							<a href="">Web Development</a> <span
							class="badge badge-primary badge-pill">131</span>
						</li>
						<li
							class="list-group-item d-flex justify-content-between align-items-center px-0">
							<a href="">Online Marketing</a> <span
							class="badge badge-primary badge-pill">78</span>
						</li>
						<li
							class="list-group-item d-flex justify-content-between align-items-center px-0">
							<a href="">Keyword Research</a> <span
							class="badge badge-primary badge-pill">56</span>
						</li>
						<li
							class="list-group-item d-flex justify-content-between align-items-center px-0">
							<a href="">Email Marketing</a> <span
							class="badge badge-primary badge-pill">98</span>
						</li>
					</ul>
				</div>

				<!-- Single Image -->
				<div class="mb-5">
					<img src="img/blog-1.jpg" alt="" class="img-fluid rounded" />
				</div>

				<!-- Recent Post -->
				<div class="mb-5">
					<h2 class="mb-4">Recent Post</h2>
					<div
						class="d-flex align-items-center bg-light shadow-sm rounded overflow-hidden mb-3">
						<img class="img-fluid" src="img/post-1.jpg"
							style="width: 80px; height: 80px" />
						<div class="pl-3">
							<h5 class="">Diam amet eos at no eos</h5>
							<div class="d-flex">
								<small class="mr-3"><i class="fa fa-user text-primary"></i>
									Admin</small> <small class="mr-3"><i
									class="fa fa-folder text-primary"></i> Web Design</small> <small
									class="mr-3"><i class="fa fa-comments text-primary"></i>
									15</small>
							</div>
						</div>
					</div>
					<div
						class="d-flex align-items-center bg-light shadow-sm rounded overflow-hidden mb-3">
						<img class="img-fluid" src="img/post-2.jpg"
							style="width: 80px; height: 80px" />
						<div class="pl-3">
							<h5 class="">Diam amet eos at no eos</h5>
							<div class="d-flex">
								<small class="mr-3"><i class="fa fa-user text-primary"></i>
									Admin</small> <small class="mr-3"><i
									class="fa fa-folder text-primary"></i> Web Design</small> <small
									class="mr-3"><i class="fa fa-comments text-primary"></i>
									15</small>
							</div>
						</div>
					</div>
					<div
						class="d-flex align-items-center bg-light shadow-sm rounded overflow-hidden mb-3">
						<img class="img-fluid" src="img/post-3.jpg"
							style="width: 80px; height: 80px" />
						<div class="pl-3">
							<h5 class="">Diam amet eos at no eos</h5>
							<div class="d-flex">
								<small class="mr-3"><i class="fa fa-user text-primary"></i>
									Admin</small> <small class="mr-3"><i
									class="fa fa-folder text-primary"></i> Web Design</small> <small
									class="mr-3"><i class="fa fa-comments text-primary"></i>
									15</small>
							</div>
						</div>
					</div>
				</div>

				<!-- Single Image -->
				<div class="mb-5">
					<img src="img/blog-2.jpg" alt="" class="img-fluid rounded" />
				</div>

				<!-- Tag Cloud -->
				<div class="mb-5">
					<h2 class="mb-4">Tag Cloud</h2>
					<div class="d-flex flex-wrap m-n1">
						<a href="" class="btn btn-outline-primary m-1">Design</a> <a
							href="" class="btn btn-outline-primary m-1">Development</a> <a
							href="" class="btn btn-outline-primary m-1">Marketing</a> <a
							href="" class="btn btn-outline-primary m-1">SEO</a> <a href=""
							class="btn btn-outline-primary m-1">Writing</a> <a href=""
							class="btn btn-outline-primary m-1">Consulting</a>
					</div>
				</div>

				<!-- Single Image -->
				<div class="mb-5">
					<img src="img/blog-3.jpg" alt="" class="img-fluid rounded" />
				</div>

				<!-- Plain Text -->
				<div>
					<h2 class="mb-4">Plain Text</h2>
					Aliquyam sed lorem stet diam dolor sed ut sit. Ut sanctus erat ea
					est aliquyam dolor et. Et no consetetur eos labore ea erat voluptua
					et. Et aliquyam dolore sed erat. Magna sanctus sed eos tempor rebum
					dolor, tempor takimata clita sit et elitr ut eirmod.
				</div>
			</div>
		</div>
	</div>
	<!-- Detail End -->


	<!-- Footer Start -->
	<div
		class="container-fluid bg-secondary text-white mt-5 py-5 px-sm-3 px-md-5">
		<div class="row pt-5">
			<div class="col-lg-3 col-md-6 mb-5">
				<a href=""
					class="navbar-brand font-weight-bold text-primary m-0 mb-4 p-0"
					style="font-size: 40px; line-height: 40px"> <i
					class="flaticon-043-teddy-bear"></i> <span class="text-white">KidKinder</span>
				</a>
				<p>Labore dolor amet ipsum ea, erat sit ipsum duo eos. Volup
					amet ea dolor et magna dolor, elitr rebum duo est sed diam elitr.
					Stet elitr stet diam duo eos rebum ipsum diam ipsum elitr.</p>
				<div class="d-flex justify-content-start mt-4">
					<a
						class="btn btn-outline-primary rounded-circle text-center mr-2 px-0"
						style="width: 38px; height: 38px" href="#"><i
						class="fab fa-twitter"></i></a> <a
						class="btn btn-outline-primary rounded-circle text-center mr-2 px-0"
						style="width: 38px; height: 38px" href="#"><i
						class="fab fa-facebook-f"></i></a> <a
						class="btn btn-outline-primary rounded-circle text-center mr-2 px-0"
						style="width: 38px; height: 38px" href="#"><i
						class="fab fa-linkedin-in"></i></a> <a
						class="btn btn-outline-primary rounded-circle text-center mr-2 px-0"
						style="width: 38px; height: 38px" href="#"><i
						class="fab fa-instagram"></i></a>
				</div>
			</div>
			<div class="col-lg-3 col-md-6 mb-5">
				<h3 class="text-primary mb-4">Get In Touch</h3>
				<div class="d-flex">
					<h4 class="fa fa-map-marker-alt text-primary"></h4>
					<div class="pl-3">
						<h5 class="text-white">Address</h5>
						<p>123 Street, New York, USA</p>
					</div>
				</div>
				<div class="d-flex">
					<h4 class="fa fa-envelope text-primary"></h4>
					<div class="pl-3">
						<h5 class="text-white">Email</h5>
						<p>info@example.com</p>
					</div>
				</div>
				<div class="d-flex">
					<h4 class="fa fa-phone-alt text-primary"></h4>
					<div class="pl-3">
						<h5 class="text-white">Phone</h5>
						<p>+012 345 67890</p>
					</div>
				</div>
			</div>
			<div class="col-lg-3 col-md-6 mb-5">
				<h3 class="text-primary mb-4">Quick Links</h3>
				<div class="d-flex flex-column justify-content-start">
					<a class="text-white mb-2" href="#"><i
						class="fa fa-angle-right mr-2"></i>Home</a> <a class="text-white mb-2"
						href="#"><i class="fa fa-angle-right mr-2"></i>About Us</a> <a
						class="text-white mb-2" href="#"><i
						class="fa fa-angle-right mr-2"></i>Our Classes</a> <a
						class="text-white mb-2" href="#"><i
						class="fa fa-angle-right mr-2"></i>Our Teachers</a> <a
						class="text-white mb-2" href="#"><i
						class="fa fa-angle-right mr-2"></i>Our Blog</a> <a class="text-white"
						href="#"><i class="fa fa-angle-right mr-2"></i>Contact Us</a>
				</div>
			</div>
			<div class="col-lg-3 col-md-6 mb-5">
				<h3 class="text-primary mb-4">Newsletter</h3>
				<form action="">
					<div class="form-group">
						<input type="text" class="form-control border-0 py-4"
							placeholder="Your Name" required="required" />
					</div>
					<div class="form-group">
						<input type="email" class="form-control border-0 py-4"
							placeholder="Your Email" required="required" />
					</div>
					<div>
						<button class="btn btn-primary btn-block border-0 py-3"
							type="submit">Submit Now</button>
					</div>
				</form>
			</div>
		</div>
		<div class="container-fluid pt-5"
			style="border-top: 1px solid rgba(23, 162, 184, 0.2);">
			<p class="m-0 text-center text-white">
				&copy; <a class="text-primary font-weight-bold" href="#">Your
					Site Name</a>. All Rights Reserved.

				<!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
				Designed by <a class="text-primary font-weight-bold"
					href="https://htmlcodex.com">HTML Codex</a> <br />Distributed By:
				<a href="https://themewagon.com" target="_blank">ThemeWagon</a>
			</p>
		</div>
	</div>
	<!-- Footer End -->
	<script>
    //토큰있어야 post가능~!
    /*<![CDATA[*/
    var header = '[[${_csrf.headerName}]]';
     var token = '[[${_csrf.token}]]';
       console.log(header);
       console.log(token);
     /*]]>*/

    //메뉴 클릭 색깔 변경 이벤트
    $('#menu-filters li').click(function(){
    	$('#menu-filters li').removeClass('active');
    	$(this).addClass('active');
    })
    
    //도전 신청으로 이동하기   --> 여유가되면 모달로 띄우기...^^;
    $('#applyBtn').on("click", function () {
      let cNo = $('#challNo').val();
      console.log(cNo);
      location.href = '/own/chall/applyForm?challNo=' + cNo
    })

    //달성률 구글차트
    var context = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(context, {
      type: 'doughnut',
      data: {
            labels: [
            '나의 인증 성공 횟수',
            '남은 인증 횟수'
          ],  
          datasets: [{
            label: 'My First Dataset',
            data: [50, 100],
            backgroundColor: [
              'rgb(54, 162, 235)',
              'rgb(255, 205, 86)'
            ],
            hoverOffset: 4
          }]
    }
    });

    /* 상세보기 버튼 */
    $('#detailBtn').on("click", function () {
      $("#challDetail").css('display', 'inline-block');
      $("#challVld").css('display', 'none');
      $("#challResult").css('display', 'none');
      $("#challMem").css('display', 'none')
    })

    /*인증하기 버튼*/
    $('#vldBtn').on("click", function () {
      $("#challVld").css('display', "inline-block");
      $("#challDetail").css('display', 'none');
      $("#challResult").css('display', 'none');
      $("#challMem").css('display', 'none');
      let challNo = $('#challNo').val();
      let userId = $('#userId').val();
      let vldButton = $('#vldFormSubmit');
      console.log(challNo, userId);
      console.log($("#resultCheck").val());
      if($("#resultCheck").val() == "false"){
        console.log("인증하기")
        //인증내역 불러오는 아작스
        $.ajax({
          url: '/own/chall/vldList?challNo='+ challNo + '&&userId='+ userId ,
          method: 'get',
          success: function(result){
            console.log(result);
            $('#dataFilter').attr('data-filter', '.'+userId);
            result.forEach( vld => {
              makeVldForm(vld)
            })
          },
          error: function(err){
            console.log(err);
          }
        }),
        //인증횟수 확인하고 버튼 설정바꾸기
        $.ajax({
        url:'/own/chall/vldCheckAjax',
        method: 'post',
        data: JSON.stringify({userId: userId,
                              challNo: challNo
                            }),
        beforeSend : function(xhr){
                      xhr.setRequestHeader(header, token);
        }, 
        contentType: "application/json",
        success: function(result){
          if(result == "able"){
            console.log('인증가능 - 이번주 인증 덜채움');
            alert(result);
          } else if(result == "todaydone"){
            console.log("이미 오늘 인증 완료.")
            $('#vldFormSubmit').attr('type', 'button').val('오늘 인증 완료.');
          } else if(result == "thisweekDone"){
            console.log("이번 주 인증완료.")
            $('#vldFormSubmit').attr('type', 'button').val('이번주 인증 완료.');
          } else{
            console.log("모르겠노");
          }
        },
        error: function(err){
          console.log(err)
        }
      })
      }
      $("#resultCheck").val("true");
    });

    /* 결과 사진폼으로 만들기*/
    function makeVldForm(vld){
      let userId = vld.userId;
      let mediaName = vld.mediaServerFile;
      let vldDate = vld.vldDate;
      console.log(userId);
      console.log(vldDate);
      let firstdiv = $('<div />').addClass('col-lg-6 col-md-6 mb-4 portfolio-item').addClass(userId);
      let secondDiv = $('<div />').addClass('position-relative overflow-hidden mb-2')
      let hTag = $('<h5 />').text(userId, vldDate)
      th:src="|/imgView/${challImg[0].mediaServerFile}|"
      let imgDiv = $('<img />').addClass('img-fluid w-100 m-1 ').attr('src', '/imgView/'+ mediaName)
      $('#vldImg').append(firstdiv.append(secondDiv.append(imgDiv, hTag)))
    }

    /*달성률 버튼*/
    $('#resultBtn').on("click", function () {
      $("#challResult").css("display", "inline-block");
      $("#challVld").css('display', 'none');
      $("#challDetail").css('display', 'none');
      $("#challMem").css('display', 'none')
    })

    /*멤버 리스트 버튼*/
    $('#memBtn').on("click", function () {
      $("#challMem").css("display", "inline-block");
      $("#challDetail").css('display', 'none');
      $("#challVld").css('display', 'none');
      $("#challResult").css('display', 'none');
      let challNo = $('#challNo').val();
      console.log(challNo);
      console.log($("#challMemCheck").val());
      if($("#challMemCheck").val() == "false"){
        $.ajax({
          url: '/own/chall/challMemList?challNo=' + challNo,
          method: 'get',
          success: function (result) {
            console.log(result)
            let ul = $("<ul />")
            result.forEach(mem => {
              console.log(mem.userId, mem.memStatus)
              ul.append($("<li />").text(mem.userId + mem.memStatus)
              .append($("<button />").text('승인').attr('onclick', 'authChange(this)'), $("<button />").text('거절').attr('onclick', 'authChange(this)')));
            })
            $("#challMem").append(ul);
          },
          error: function (err) {
            console.log(err)
          }
        })
      }
      $("#challMemCheck").val("true");
    })
    

    $('.acceptBtn').on("click", function() {
      console.log($('.acceptBtn'));
    })

    function authChange(e){
      console.log($(e).text());
      let challNo = $('#challNo').val();
      let userId = $(e).parent().text().substring(0,3);
      let memStatus = $(e).text();
      $.ajax({
        url: '/own/chall/challMemAuth',
        method: 'post',
        data: JSON.stringify({userId: userId,
                              challNo: challNo,
                              memStatus: memStatus
                            }),
        beforeSend : function(xhr){
                      xhr.setRequestHeader(header, token);
        }, 
        contentType: "application/json",
        success: function(result){
          console.log(result)
        },
        error: function(err){
          console.log(err)
        }
      })
    }
 
    //도전리더만 결과처리버튼
    $("#resultProc").on("click", function(){
      let challNo = $('#challNo').val();
      console.log(challNo);
      $.ajax({
        url: '/own/chall/challResult',
        method:'post',
        data: JSON.stringify({challNo: challNo}),
        beforeSend : function(xhr){
                      xhr.setRequestHeader(header, token);
        },
        contentType: "application/json",
        success: function(result) {
          console.log(result)
        },
        error: function(err){
          console.log(err)
        }
      })
    })

     /* 멤버 승인, 거절 버튼 */
     /*멤버 리스트 ul li 만들기*/


    	//첨부파일 이미지 
      ( /* att_zone : 이미지들이 들어갈 위치 id, btn : file tag id */
        imageView = function imageView(att_zone, btn){

            var attZone = document.getElementById(att_zone);
            var btnAtt = document.getElementById(btn)
            var sel_files = [];
            
            // 이미지와 체크 박스를 감싸고 있는 div 속성
            var div_style = 'display:inline-block;position:relative;'
                        + 'width:550px;height:auto;margin:5px;z-index:1';
            // 미리보기 이미지 속성
            var img_style = 'width:100%;height:100%;z-index:none';
            // 이미지안에 표시되는 체크박스의 속성
            var chk_style = 'width:30px;height:30px;position:absolute;font-size:24px;'
                        + 'right:0px;bottom:0px;z-index:999;background-color:rgba(255,255,255,0.1);color:#f00';
        
            btnAtt.onchange = function(e){
            var files = e.target.files;
            var fileArr = Array.prototype.slice.call(files)
            for(f of fileArr){
                imageLoader(f);
            }
            }  
            
        
            // 탐색기에서 드래그앤 드롭 사용
            attZone.addEventListener('dragenter', function(e){
            e.preventDefault();
            e.stopPropagation();
            }, false)
            
            attZone.addEventListener('dragover', function(e){
            e.preventDefault();
            e.stopPropagation();
            
            }, false)
        
            attZone.addEventListener('drop', function(e){
            var files = {};
            e.preventDefault();
            e.stopPropagation();
            var dt = e.dataTransfer;
            files = dt.files;
            for(f of files){
                imageLoader(f);
            }
            
            }, false)
            
            /*첨부된 이미리즐을 배열에 넣고 미리보기 */
            imageLoader = function(file){
            sel_files.push(file);
            var reader = new FileReader();
            reader.onload = function(ee){
                let img = document.createElement('img')
                img.setAttribute('style', img_style)
                img.src = ee.target.result;
                attZone.appendChild(makeDiv(img, file));
            }
            
            reader.readAsDataURL(file);
            }
            
            /*첨부된 파일이 있는 경우 checkbox와 함께 attZone에 추가할 div를 만들어 반환 */
            makeDiv = function(img, file){
            var div = document.createElement('div')
            div.setAttribute('style', div_style)
            
            var btn = document.createElement('input')
            btn.setAttribute('type', 'button')
            btn.setAttribute('value', 'x')
            btn.setAttribute('delFile', file.name);
            btn.setAttribute('style', chk_style);
            btn.onclick = function(ev){
                var ele = ev.srcElement;
                var delFile = ele.getAttribute('delFile');
                for(var i=0 ;i<sel_files.length; i++){
                if(delFile== sel_files[i].name){
                    sel_files.splice(i, 1);      
                }
                }
                
                dt = new DataTransfer();
                for(f in sel_files) {
                var file = sel_files[f];
                dt.items.add(file);
                }
                btnAtt.files = dt.files;
                var p = ele.parentNode;
                attZone.removeChild(p)
            }
            div.appendChild(img)
            div.appendChild(btn)
            return div
            }
        }
        )('att_zone', 'btnAtt')

  </script>
	</div>
</body>

</html>