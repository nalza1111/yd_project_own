 <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
	  >

<head>

    <!-- ========== Meta Tags ========== -->
    <meta charset="UTF-8">
    <meta name="description" content="Cocoon -Portfolio">
    <meta name="keywords" content="Cocoon , Portfolio">
    <meta name="author" content="Pharaohlab">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!-- ========== Title ========== -->
    <title> Cocoon -Portfolio</title>
    <!-- ========== Favicon Ico ========== -->
    <!--<link rel="icon" href="fav.ico">-->
    <!-- ========== STYLESHEETS ========== -->
    <!-- Bootstrap CSS -->
    <link href="/css/sns/css/bootstrap.min.css" rel="stylesheet">
    <!-- Fonts Icon CSS -->
    <link href="/css/sns/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/sns/css/et-line.css" rel="stylesheet">
    <link href="/css/sns/css/ionicons.min.css" rel="stylesheet">
    <!-- Carousel CSS -->
    <link href="/css/sns/css/slick.css" rel="stylesheet">
    <!-- Magnific-popup -->
    <link rel="stylesheet" href="/css/sns/css/magnific-popup.css">
    <!-- Animate CSS -->
    <link rel="stylesheet" href="/css/sns/css/animate.min.css">
    <!-- Custom styles for this template -->
    <link href="/css/sns/css/main.css" rel="stylesheet">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
    <style>
        /* The Modal (background) */
        .searchModal {
            display: none;
            /* Hidden by default */
            position: fixed;
            /* Stay in place */
            z-index: 10;
            /* Sit on top */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.4);
            /* Black w/ opacity */
        }

        /* Modal Content/Box */
        .search-modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 70%;
            /* Could be more or less, depending on screen size */
        }

        #snsprofilebox {
            text-align: center;
            padding: 35px;
            margin-bottom: 50px;
            border-bottom: 1px solid lightgray;
        }

        .homeProfile {
            margin-top: 10px;
            margin-bottom: 10px;
            padding-left: 30px;
        }
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 21; /* Sit on top */
            left: 0;
            top: -100px;
            width: 100%; /* Full width */
            height: 113%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }
        /* Modal Content/Box */
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto; /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 50%; /* Could be more or less, depending on screen size */
        }
        /* The Close Button */
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        
        .storyProfileImg {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            position: absolute;
            top: -5px;
            left: -10px;
        }

        .storyProfileName {
            font-size: 15px;
            position: absolute;
            top: 6px;
            left: 57px;
            font-weight: 600;
        }
        .storyImg {
            width: 600px;
            height: 519px;
            position: absolute;
            top: 0px;
            left: -20px;
            object-fit: cover;
            opacity: 0;
            cursor: pointer;
        }
        
        .storyImg.active{
            opacity: 1;
        }

        .storyProfileDate {
            position: absolute;
            top: 6px;
            right: 5px;
            font-size: 14px;
            opacity: 0;
        }
        .storyProfileDate.active{
            opacity: 1;
        }

        .action-btns {
            position: absolute;
            z-index: 30;
        }

        .Feedbtn {
            width: 4rem;
            height: 4rem;
            background-color:rgba(128, 128, 128,.3);
            transition: all .3s;
            border: none;
            cursor: pointer;
            font-size: 1.6rem;
            color:#fff;
        }
        li.dot{
            background-color: lightgray;
            margin-top: 20px;
        }
        li.dot:hover {
            background-color: lightblue;
        }
        li.dot.active {
            background-color: skyblue;
        }
        .blog_card_top{
            opacity: 0;
        }
        .blog_card_top.active{
            transform: translateX(0);
            opacity: 1;
            visibility: visible;
            z-index: 20;
        }
        /*검색 프로필*/
        .searchProfileImg{
            width:50px;
            height:50px;
            border-radius: 50%;
            margin-bottom: 7px;
        }

         /*게시글 더보기*/
         .feed-content {
            display: inline-block;
            width: 760px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            vertical-align: top;
        }

        .feed-content.more {
            display: inline;
            white-space: normal;
        }
        .btn-more{
            color:lightgray;
            font-size: 12px;
            cursor: pointer;
        }

        #schoolInput{
            width: 260px;
            height: 45px;
            border-radius: 20px;
            margin-top: 30px;
            margin-left: 20px;
            margin-bottom: 10px;
            background-color: ghostwhite;
            border:none;
            padding: 20px;
        }

        li {
            list-style: none;   
        }

        .wrap {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login {
            width: 100%;
            height: 600px;
            background: white;
            border-radius: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        h2 {
            color: tomato;
            font-size: 2em;
        }
        .login_sns {
            padding: 20px;
            display: flex;
        }

        .login_sns li {
            padding: 0px 15px;
        }

        .login_sns a {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            border-radius: 50px;
            background: white;
            font-size: 20px;
            box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.4), -3px -3px 5px rgba(0, 0, 0, 0.1);
        }

        .login_id {
            margin-top: 20px;
            width: 80%;
        }

        .login_id input {
            width: 100%;
            height: 50px;
            border-radius: 30px;
            margin-top: 10px;
            padding: 0px 20px;
            border: 1px solid lightgray;
            outline: none;
        }

        .login_pw {
            margin-top: 20px;
            width: 80%;
        }

        .login_pw input {
            width: 100%;
            height: 50px;
            border-radius: 30px;
            margin-top: 10px;
            padding: 0px 20px;
            border: 1px solid lightgray;
            outline: none;
        }

        .login_account {
            margin-top: 20px;
            width: 80%;
        }
        .login_account input {
            width: 100%;
            height: 50px;
            border-radius: 30px;
            margin-top: 10px;
            padding: 0px 20px;
            border: 1px solid lightgray;
            outline: none;
        }

        .submit {
            margin-top: 50px;
            width: 80%;
        }
        .submit input {
            width: 100%;
            height: 50px;
            border: 0;
            outline: none;
            border-radius: 40px;
            background: linear-gradient(to left, #0c5460, #17a2b8);
            color: white;
            font-size: 1.2em;
            letter-spacing: 2px;
            font-weight:600;
        }
    </style>

    
    <!-- bootstrap -->
    <script src="/css/sns/js/jquery.min.js"></script>
    <script src="/css/sns/js/popper.js"></script>
    <script src="/css/sns/js/bootstrap.min.js"></script>
    <script src="/css/sns/js/waypoints.min.js"></script>
    <!--slick carousel -->
    <script src="/css/sns/js/slick.min.js"></script>
    <!--Portfolio Filter-->
    <script src="/css/sns/js/imgloaded.js"></script>
    <script src="/css/sns/js/isotope.js"></script>
    <!-- Magnific-popup -->
    <script src="/css/sns/js/jquery.magnific-popup.min.js"></script>
    <!--Counter-->
    <script src="/css/sns/js/jquery.counterup.min.js"></script>
    <!-- WOW JS -->
    <script src="/css/sns/js/wow.min.js"></script>
    <!-- Custom js -->
    <script src="/css/sns/js/main.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
            $(document).ready(function(){
                $(".blog_card .blog_card_top:first-child").addClass("active");
                $(".blog_card .dot:first-child").addClass("active");

            });

            window.addEventListener('scroll', function(){
            console.log( window.scrollY )
            });
    </script>
</head>

<div layout:fragment="content">
<body>
        <div class="loader">
            <div class="loader-outter"></div>
            <div class="loader-inner"></div>
        </div>

        <div class="body-container container-fluid">
            <a class="menu-btn" href="javascript:void(0)">
                <i class="ion ion-grid"></i>
            </a>
            <div class="row justify-content-center">
                <!--=================== side menu ====================-->
                <div class="col-lg-2 col-md-3 col-12 menu_block">

                    <!--logo -->
                    <div class="logo_box">
                       
                    </div>
                    <!--logo end-->

                    <div id="schoolLi" style="position:relative">
                        <input type="text" id="schoolInput" placeholder="검색" onkeyup="search(this);">
                            <div id="schoolList" style="z-index:1; position: absolute; margin-left: 20px;"></div>
                    </div>

                    <!--main menu -->
                    <div class="side_menu_section">
                        <ul class="menu_nav">
                            <li><a href="/own/home">Home</a></li>
                            <li class="active"><a href="/own/sns">sns메인</a></li>
                            <span th:if="${snsInfo!=null}">
                            <li><a th:href="@{snsFeed(snsNickname=${snsInfo.snsNickname})}">나의 피드</a></li></span>
                            <span th:unless="${snsInfo!=null}">
                                <li><a href="#">나의 피드</a></li></span>
                            <li><a href="/own/snsNewFeed">최신게시글</a></li>                  
                        </ul>
                    </div>
                    <!--main menu end -->
                    <!--social and copyright -->
                    <div class="side_menu_bottom">
                        <div class="side_menu_bottom_inner">
                            <ul class="social_menu">
                                <li>
                                    <a href="#"> <i class="ion ion-social-pinterest"></i> </a>
                                </li>
                                <li>
                                    <a href="#"> <i class="ion ion-social-facebook"></i> </a>
                                </li>
                                <li>
                                    <a href="#"> <i class="ion ion-social-twitter"></i> </a>
                                </li>
                                <li>
                                    <a href="#"> <i class="ion ion-social-dribbble"></i> </a>
                                </li>
                            </ul>
                            <div class="copy_right">
                                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                                <p class="copyright">Copyright &copy;<script>
                                        document.write(new Date().getFullYear());
                                    </script> All rights reserved | This template is made with <i class="fa fa-heart-o"
                                        aria-hidden="true"></i> by <a href="https://colorlib.com"
                                        target="_blank">Colorlib</a></p>
                                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                            </div>
                        </div>
                    </div>
                    <!--social and copyright end -->

                </div>
                <!--=================== side menu end====================-->

                <!--=================== content body 메인====================-->

                <div class="col-lg-10 col-md-9 col-12 body_block  align-content-center"  th:if="${session.loginUser.snsAccountNo != null}">
                    <br>
                    <div th:if="${!#lists.isEmpty(snsStoryList)}">
                    <div id="snsprofilebox" class="modalBtn">
                        <span class="storyInfo" th:each="story : ${storyInfo}">
                            <span th:if="${story.mediaServerFile != null}">
                                <img th:src="|/imgView/${story.mediaServerFile}" 
                                    style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">
                            </span>
                            <span th:unless="${story.mediaServerFile != null}">
                                <img src="/css/sns/img/defaultUser.png" 
                                    style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">
                            </span>
                            <span class="storyNickname" th:text="${story.snsNickname}" 
                            	  style="font-size:17px; padding-right:45px; cursor: pointer; font-weight: 800; padding-left: 10px;"></span>
                        </span>
                    </div>
                    </div>

                    <!-- 스토리 모달 -->
                    <div class="modal">
                        <div class="modal-content" style="width: 500px; height: 600px;">
                            <span class="close"></span>

                            <div class="storyProfile" style="position:relative; width: 450px; height: 60px;">
                            </div>

                            <div class="storyContent" style="position:relative; width:499px;">

                            </div>
                        </div>
                    </div>
                   
                    <!-- sns 메인 -->
                    <div class="blog">
                        <div class="row justify-content-center">
                            <div class="col-lg-8 col-md-12 col-12" style="padding-left: 80px;">
                                <th:block th:each="now, stat : ${nowFeed}">
                                    <article class="blog_card" th:if="${snsFollow != 0}" data-aos="fade-down" style="width:802px; border: 1px solid lightgray; margin-bottom: 100px; background-color: white;">
                                        <div class="homeProfile">
                                            <img th:src="|/imgView/${now.mediaServerFile}"
                                                style="width: 45px; height: 45px; border-radius: 50%; object-fit: cover; border: 1px solid lightgray;">
                                            <a th:href="@{/own/snsFeed(snsNickname=${now.snsNickname})}">
                                                <span th:text="${now.snsNickname}"
                                                    style="font-size: 14px; padding-left: 10px; color: gray; font-weight: 800;"></span></a>
                                        </div>
                                        <div class="feedImg" style="position: relative; width: 800px; height: 500px;">
                                            <div class="blog_card_top" th:each="nowimg : ${now.fileList}"
                                                th:data-item="${nowimg.mediaNo}">
                                                <img th:src="|/imgView/${nowimg.mediaServerFile}"
                                                    style="position: absolute; width: 800px; height: 500px; object-fit: cover;" />
                                            </div>
                                        </div>
                                        <div class="container-dots" style="display:flex; justify-content: center; width:600px; margin: 0 auto; padding-inline-start: 0px;">
                                            <ul class="dots-parent" style="list-style:none; padding-left: 0px;" >
                                                <li class="dot" th:each="nowimg2 : ${now.fileList}" th:data-item="${nowimg2.mediaNo}"
                                                    style="float:left; width: 20px; height: 20px; border-radius: 50%; margin-right: 10px; cursor:pointer;"></li>
                                            </ul>
                                        </div>
                                        <div class="blog_card_bottom">
                                            <div class="meta_data">
                                                <span>좋아요 <span th:text="${now.likeCount}" style="font-size:14px; font-weight:600;"></span>개</span>
                                                <span>댓글 <span th:text="${now.replyCount}" style="font-size:14px; font-weight:600;"></span>개</span>
                                                <span th:text="${#dates.format(now.snsBoardDate, 'yyyy-MM-dd HH:mm:ss')}">
                                                 </span>
                                                 <input id="snsBoardDate" type="hidden" th:value="${now.snsBoardDate}">
                                        </div>
                                                <p th:text="${now.snsBoardContent}" class="feed-content" value="summary"></p>
                                        </div>
                                        <p class="btn-more" style="text-align: right;">더보기</p>
                                    </article>
                                </th:block>
                                

                                <article class="blog_card" th:if="${snsFollow == 0}">
                                    <div class="blog_card_top">
                                        <img style="margin: 100px; margin-left: 250px;" src="/css/sns/img/camera.png" alt="blog title " />
                                    </div>
                                </article>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="col-lg-10 col-md-9 col-12 body_block  align-content-center"  th:unless="${session.loginUser.snsAccountNo != null}">


                </div>
                <!--=================== content body end ====================-->
            </div>
        </div>

        <!--  ========== SNS 계정 간편가입 모달 ==========  -->
 <div th:if="${session.loginUser.snsAccountNo == null}">
            <div id="modal" class="searchModal">
                <div class="search-modal-content" style="background-color: lightblue; width: 600px;">
                    <div class="wrap">
                        <div class="login">
                            <!--<h2>SNS 간편 가입</h2>-->
                            <form action="/own/snsAccount" method="post" name="snsForm" style="width: 570px; padding-left: 115px;">
                            <input name="userId" type="hidden" th:value="${session.loginUser.userId}">
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                            <div class="login_id">
                                <h4>ID정보</h4>
                                <input th:value="${session.loginUser.userId}" readonly disabled>
                            </div>
                            <div class="login_pw">
                                <h4>Email정보</h4>
                                <input th:value="${session.loginUser.userEmail}"  readonly disabled>
                            </div>
                            <div class="login_account">
                                <h4>닉네임 <sup>*(필수항목)</sup></h4>
                                <input type="text" name="snsNickname" placeholder="SNS 닉네임을 입력하세요." >
                            </div>
                            <div class="submit">
                                <input id="snsAccountBtn" type="button" onclick="snscheck()" role="button" value="SNS 가입">
                            </div>
                        </form>
                        </div>
                        </div>
                        <hr>
                        <div style="cursor:pointer; text-align: center;padding-bottom: 10px;padding-top: 10px; background-color: lightblue; color: white; font-size:20px; font-weight:600; cursor:pointer;"
                            onClick="closeModal();">닫기
                            <span class="pop_bt modalCloseBtn" style="font-size: 13pt;">
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ========== 모달 end ===========  -->

        <script th:inline="javascript">
        /*<![CDATA[*/
        var header = /*[[${_csrf.headerName}]]*/ 'defalut';
        var token = /*[[${_csrf.token}]]*/ 'defalut';
        /*]]>*/
            jQuery(document).ready(function () {
                $("#modal").show();
            });

            function closeModal() {
                $('.searchModal').hide();
                alert("메인페이지로 이동합니다.")
                location.href = "/own/home"
            };
                        
            //회원가입 중복체크
            function snscheck(){
            	let snsNickname = $('input[name="snsNickname"]').val();
            	console.log(snsNickname)
            	$.ajax({
            		url: '/own/nicknameChk',
            		async: false,
            		data: {snsNickname}
            	}).then(res=>{
            		console.log(res)
            		if(res==0){
            			snsForm.submit();            		
            		}else{
            			alert('중복된 아이디입니다')
            			return false;
            		}
            	})
            }
            
            //게시글 더보기
            $('.col-lg-8').on("click",'.btn-more',function(){
            		console.log($(this).parent())
            		let more = $(this).siblings('.blog_card_bottom').children().siblings('.feed-content').attr("value")
                    console.log("더보기 버튼 클릭")
                    
                    if(more=="summary"){
                    	$(this).siblings('.blog_card_bottom').children().siblings('.feed-content').addClass("more");
                    	$(this).siblings('.blog_card_bottom').children().siblings('.feed-content').attr("value", "more")
                        $(this).siblings('.blog_card_bottom').siblings('.btn-more').text("접기");
                    }else{
                    	$(this).siblings('.blog_card_bottom').children().siblings('.feed-content').removeClass("more");
                    	$(this).siblings('.blog_card_bottom').children().siblings('.feed-content').attr("value", "summary")
                        $(this).siblings('.blog_card_bottom').siblings('.btn-more').text("더보기");

                    }
                })
   
        //게시글 이미지 페이징
        $('.dot').each(function(){
            $(this).on("click", function(e){
                $('.dot').not(this).removeClass("active");
                $(this).addClass("active");
                console.log(this);
                console.log('단추클릭');
                console.log($(this).attr("data-item"));
                let btnData = $(this).attr("data-item");
                $('.blog_card .blog_card_top').not('[data-item="'+btnData+'"]').removeClass("active")
                //$('.blog_card_top[data-item="'+btnData+'"]').addClass("active")
                $('.blog_card .blog_card_top[data-item="'+btnData+'"]').addClass("active")

            })
        })

        //스토리 상세보기 ajax
        $('.modalBtn').on("click",'.storyInfo', function (e) {      
            // console.log($(this).text());
             var storyNickname = $(e.target).text()
             $(".modal").show();

                $.ajax({
                url: '/own/snsStoryList',
                method: 'post',
                data: {
                    snsNickname: storyNickname
                },
                beforeSend: function (xhr) {
                    xhr.setRequestHeader(header, token);
                },
                success: function (res) {
                    console.log("1-----------------------")
                    console.log(res)

                    console.log("2-----------------------")
                    console.log(res.storyImg)

                    console.log("3-----------------------")
                    console.log(res.profileImg)

                    console.log("4-----------------------")
                    console.log(res.storyInfo)

                   
                    let storyProfileImg = "";
                    if(res.profileImg != null){
                        storyProfileImg = $('<img>').attr({
                            "src": "/imgView/" + res.profileImg.mediaServerFile,
                            "class": "storyProfileImg",
                            "onerror":  'this.src="/css/sns/img/defaultUser.png"'
                        })
                    }else{    
                        
                        storyProfileImg = $('<img>').attr({
                            "src": "/css/sns/img/defaultUser.png",
                            "class": "storyProfileImg" 
                        })
                    }
                        let storyProfileName = $('<span>').text(res.storyInfo[0].snsNickname)
                        storyProfileName.attr('class', "storyProfileName")
                        let stroyProfileLink = $('<a>').attr("href","/own/snsFeed?snsNickname="+res.storyInfo[0].snsNickname+"")
                            console.log(stroyProfileLink);
                            stroyProfileLink.css({"position":"absolute","width":"150px","height":"35px"});
                        $('.storyProfile').append(storyProfileImg, storyProfileName, stroyProfileLink);
                    //<a th:href="@{/own/snsFeed(snsNickname=${now.snsNickname})}">
                   for (let i = 0;  i < res.storyImg.length; i++) {
                        let storyImg = $('<img>').attr({
                            "src": "/imgView/" + res.storyImg[i].mediaServerFile,
                            "class": "storyImg",
                            "page-name": i
                        })
                        let storyProfileDate = $('<span>').text(elapsedText(res.storyInfo[i].snsStoryDate));
                            storyProfileDate.attr({'class': "storyProfileDate",
                                                  "page-name": i});
                                                  $('.storyProfile').append(storyProfileDate);
                                                  $('.storyContent').append(storyImg);
                                                  
                              }
                            $('.storyProfile').children(".storyProfileDate").eq(0).addClass("active")
                            $('.storyContent').children(".storyImg").eq(0).addClass("active")


                },
                error: function (err) {
                    console.log(err)
                }
            })
        })

        //스토리 게시글 페이징
        $('.storyContent').on("click",function(){
            console.log("스토리 화면 클릭")
            let i = 0;
            //$('.storyContent').children().length 받아온 사진의 갯수 3개 0,1,2이기 때문에 작다고 비교
            //$('.storyContent').children('.storyImg.active').attr("page-name") 현재 active상태인 이미지의 번호
            let allImgLength = $('.storyContent').children().length;
            let activeImg = $('.storyContent').children('.storyImg.active');
            let activeImgNum = $('.storyContent').children('.storyImg.active').attr("page-name");
            let activeDate =$('.storyProfile').children('.storyProfileDate.active');
            console.log(activeImg)
            console.log(activeImgNum)
            if(activeImgNum < allImgLength - 1){
                console.log("총 이미지 갯수보다 수가 적음")
                activeImg.next().addClass("active");
                activeDate.next().addClass("active");
                activeDate.removeClass("active");
                activeImg.removeClass("active");

            }else{
                console.log("첫번째 이미지 active 상태로 하기.")
                $('.storyProfile').children(".storyProfileDate").last().removeClass("active")
                $('.storyContent').children(".storyImg").last().removeClass("active")
                $('.storyProfile').children(".storyProfileDate").first().addClass("active")
                $('.storyContent').children(".storyImg").first().addClass("active")
            }

        })
        
        window.onload = function(){
            console.log($('#snsBoardDate').attr("value"))
            $('#snsBoardDate').attr("value")
           var snsBoardTest = elapsedText($('#snsBoardDate').attr("value"))
           console.log(snsBoardTest)
           $('#snsBoardDate').innerHTML = snsBoardTest;
        }

            //시간계산 함수
            function elapsedText(date) {
                console.log(date);
                date = new Date(date);
                // 초 (밀리초)
                const seconds = 1;
                // 분
                const minute = seconds * 60;
                // 시
                const hour = minute * 60;
                // 일
                const day = hour * 24;

                var today = new Date();
                var elapsedTime = Math.trunc((today.getTime() - date.getTime()) / 1000);

                var elapsedText = "";
                if (elapsedTime < seconds) {
                    elapsedText = "방금 전";
                } else if (elapsedTime < minute) {
                    elapsedText = elapsedTime + "초 전";
                } else if (elapsedTime < hour) {
                    elapsedText = Math.trunc(elapsedTime / minute) + "분 전";
                } else if (elapsedTime < day) {
                    elapsedText = Math.trunc(elapsedTime / hour) + "시간 전";
                } else if (elapsedTime < (day * 3)) {
                    elapsedText = Math.trunc(elapsedTime / day) + "일 전";
                } else {
                    elapsedText = SimpleDateTimeFormat(date, "yyyy-MM-dd");
                }

                return elapsedText;
            }

            // Modal 영역 밖을 클릭하면 Modal을 닫습니다.
            window.onclick = function (event) {
                if (event.target.className == "modal") {
                    event.target.style.display = "none";
                    $('.storyProfile').children().remove();
                    $('.storyContent').children().remove();
                }
            };
        
    //검색
    function search(target){
     // elementary, middle, high
       var checkWord = $("#schoolInput").val();
       var schoolList = $("#schoolList");
       if(checkWord==""){
           schoolList.empty();
           return;
        }
       $.ajax({
           type: 'GET',
           dataType: 'JSON',
           url: '/own/sns/ListSearch', 
           error: function(err){
               console.log(err);
           },
           success: function(data){
              
                console.log(checkWord);

                schoolList.empty();
                console.log(data);
                data.forEach((school)=>{
                    if(school['snsNickname'].includes(checkWord)){
                        schoolList.append(`<img class="searchProfileImg" src="/imgView/${school['mediaServerFile']}" onerror='this.src="/css/sns/img/defaultUser.png"'>
                                       <span style="cursor: pointer;" onclick="select(this);"> ${school['snsNickname']} </span> <br/>
                                       `   );                
                    }
                })
               
           }
       })
   }    
        function select(target){
            location.href = '/own/snsFeed?snsNickname='+target.innerText
        }
        </script>



 <script>
        AOS.init({
            easing: 'ease-out-back',
            duration: 1000
        });
     
</script>
</body>
    </div>

</html>